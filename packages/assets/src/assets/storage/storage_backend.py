from typing import Protocol

from assets.models import AssetInDB, DeviceAssetLink


class AssetsStorageBackend(Protocol):
    async def get_by_id(self, asset_id: str) -> AssetInDB | None: ...
    async def list_all(self) -> list[AssetInDB]: ...
    async def list_by_parent(self, parent_id: str | None) -> list[AssetInDB]: ...
    async def save(self, asset: AssetInDB) -> None: ...
    async def delete(self, asset_id: str) -> None: ...
    async def get_children(self, asset_id: str) -> list[AssetInDB]: ...
    async def get_descendants(self, asset_id: str) -> list[AssetInDB]: ...
    async def update_descendant_paths(self, asset_id: str) -> None: ...

    # Device-asset linking
    async def link_device(self, link: DeviceAssetLink) -> None: ...
    async def unlink_device(self, device_id: str, asset_id: str) -> None: ...
    async def get_device_ids_for_asset(self, asset_id: str) -> list[str]: ...
    async def get_asset_ids_for_device(self, device_id: str) -> list[str]: ...
