id: thermocktat_mqtt
transport: mqtt

device_config:
  - name: device_id

attributes:
  - name: temperature
    data_type: float
    read:
      topic: "thermocktat/${device_id}/snapshot"
      request:
        topic: "thermocktat/${device_id}/get/snapshot"
        message:
          input: "hello" # actually anything works in the message
    json_pointer: /ambient_temperature

  - name: temperature_setpoint
    data_type: float
    read:
      topic: "thermocktat/${device_id}/snapshot"
      request:
        topic: "thermocktat/${device_id}/get/snapshot"
        message:
          input: "hello"
    write:
      topic: "thermocktat/${device_id}/set/temperature_setpoint"
      request:
        topic: "thermocktat/${device_id}/set/temperature_setpoint"
        message:
          value: ${value}
    json_pointer: /temperature_setpoint

  - name: state
    data_type: bool
    read:
      topic: "thermocktat/${device_id}/snapshot"
      request:
        topic: "thermocktat/${device_id}/get/snapshot"
        message:
          input: "hello"
    write:
      topic: "thermocktat/${device_id}/set/enabled"
      request:
        topic: "thermocktat/${device_id}/set/enabled"
        message:
          value: ${value}
    json_pointer: /enabled

  - name: temperature_setpoint_min
    data_type: float
    read:
      topic: "thermocktat/${device_id}/snapshot"
      request:
        topic: "thermocktat/${device_id}/get/snapshot"
        message:
          input: "hello"
    write:
      topic: "thermocktat/${device_id}/set/temperature_setpoint_min"
      request:
        topic: "thermocktat/${device_id}/set/temperature_setpoint_min"
        message:
          value: ${value}
    json_pointer: /temperature_setpoint_min

  - name: temperature_setpoint_max
    data_type: float
    read:
      topic: "thermocktat/${device_id}/snapshot"
      request:
        topic: "thermocktat/${device_id}/get/snapshot"
        message:
          input: "hello"
    write:
      topic: "thermocktat/${device_id}/set/temperature_setpoint_max"
      request:
        topic: "thermocktat/${device_id}/set/temperature_setpoint_max"
        message:
          value: ${value}
    json_pointer: /temperature_setpoint_max

  - name: fan_speed
    data_type: str
    read:
      topic: "thermocktat/${device_id}/snapshot"
      request:
        topic: "thermocktat/${device_id}/get/snapshot"
        message:
          input: "hello"
    write:
      topic: "thermocktat/${device_id}/set/fan_speed"
      request:
        topic: "thermocktat/${device_id}/set/fan_speed"
        message:
          value: ${value}
    json_pointer: /fan_speed

  - name: mode
    data_type: str
    read:
      topic: "thermocktat/${device_id}/snapshot"
      request:
        topic: "thermocktat/${device_id}/get/snapshot"
        message:
          input: "hello"
    write:
      topic: "thermocktat/${device_id}/set/mode"
      request:
        topic: "thermocktat/${device_id}/set/mode"
        message:
          value: ${value}
    json_pointer: /mode
